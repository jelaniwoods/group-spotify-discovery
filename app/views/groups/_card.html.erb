<div class="card mb-3">
  <h2 class="card-header h4">
    Group #<%= group.id %>
  </h2>

  <div class="card-body">
    <dl class="mb-1">
      <dt>Name</dt>
      <dd><%= group.name %></dd>

      <dt>Owner</dt>
      <dd><%= group.user.username %></dd>

    </dl>
    <ul class="list-group">
      <% group.members.each do |member| %>
        <li class="list-group-item">
          <%= member.username %>
        </li>
      <% end %>
    </ul>

    <div class="row">
      <div class="col">
        <%= link_to_show_or_back group, '<i class="fas fa-search-plus"></i>'.html_safe, '<i class="fas fa-chevron-left"></i>'.html_safe, class: "btn btn-block btn-outline-secondary" %>
      </div>

      <div class="col">
        <%= link_to edit_group_url(group), class: "btn btn-block btn-outline-secondary" do %>
          <i class="fas fa-edit"></i>
        <% end %>
      </div>

      <div class="col">
        <%= link_to group, method: :delete, data: { confirm: "Do you really want to delete this group?" }, class: "btn btn-block btn-outline-secondary" do %>
          <i class="fas fa-trash-alt"></i>
        <% end %>
      </div>
    </div>
  </div>

  <div class="card-footer text-muted">
    Last updated <%= time_ago_in_words(group.updated_at) %> ago
  </div>
</div>
<hr>
<h2>
  <%= group.user.username %>
</h2>
<h4>most listened to songs in past week</h4>
<ul class="list-group list-group-flush">
  <% top_weekly_track_names = group.user.logs.joins(:track).where(played_at: 1.week.ago..).limit(3).top(:name) %>
  <%= render partial: "logs/list_item_top", locals: {user: group.user}, collection: top_weekly_track_names, as: :log %>
</ul>
<hr>
<% group.members.each do |member| %>
<h2>
  <%= member.username %>
</h2>
  <h4>most listened to songs in past week</h4>
  <ul class="list-group list-group-flush">
    <% top_weekly_track_names = member.logs.joins(:track).where(played_at: 1.week.ago..).limit(3).top(:name) %>
    <%= render partial: "logs/list_item_top", locals: {user: member}, collection: top_weekly_track_names, as: :log %>
  </ul>
<% end %>
